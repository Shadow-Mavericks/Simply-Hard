actor KunaisLifeStealingPuff : BulletPuff
{
	Radius 1
	Height 1
	+EXTREMEDEATH
	+PUFFONACTORS
	+PUFFGETSOWNER
	+FORCEPAIN
	+NOSPAWNEVENTSCRIPT
	States
	{
		XDeath:
		Spawn:
			KPUF AB 3 Bright
			goto Melee
		Melee:
			KPUF CDEFG 3 Bright
			stop
	}
}

ACTOR SoulreaperPuff : KunaisLifeStealingPuff //I know its for special effects but for this case, its honestly... just a sound for his soul reaper
{
	-FORCEPAIN
	-EXTREMEDEATH
	+NOEXTREMEDEATH
	Scale 0.5
	VSpeed 0
	States
	{
		Spawn:
			KPUF A 0
			goto Melee
		XDeath:
			KPUF A 0 A_PlaySound("Weapons/SReaperhit", CHAN_AUTO)
			goto Melee
	}
}

ACTOR SoulreaperPuff_SweetSpot : KunaisLifeStealingPuff
{
	VSpeed 0
	States
	{
		XDeath:
			KPUF A 0 A_PlaySound("Weapons/SReaperhit", CHAN_AUTO)
			KPUF AB 3 Bright
			goto Melee
		Spawn:
			KPUF A 0 NoDelay A_PlaySound("Weapons/Sreaperwall", CHAN_AUTO)
			KPUF AB 3 Bright
			goto Melee
	}
}

actor KunaisHealthStealBonus : HealthBonus
{
	Inventory.Amount 1
	Inventory.MaxAmount 150
}

actor HealingSeekerPuff : KunaisLifeStealingPuff
{
	RenderStyle Add
	Alpha 1.0
	Scale 0.5
	States
	{
		XDeath:
		Spawn:
		Melee:
			KPUF CDEFG 2 Bright
			stop
	}
}

actor HealingSeeker
{
	Radius 1
	Height 1
	Speed 30
	Scale 0.5
	RenderStyle Add
	Alpha 1.0
	
	var int user_healamt;
	
	Projectile
	+SEEKERMISSILE
	+NOCLIP
	+NOINTERACTION
	States
	{
		Spawn:
			KPUF ABAB 1 Bright A_SpawnItemEx("Red_Star_NoRise", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			KPUF A 0 A_ChangeVelocity(frandom(30, 32), 0.0, velz, CVF_RELATIVE | CVF_REPLACE)
			goto Seek
		Seek:
			KPUF A 1 Bright A_SeekerMissile(8.0, 24.0, SMF_PRECISE | SMF_CURSPEED, 256, 256)
			KPUF A 0 Bright A_SpawnItemEx("Red_Star_NoRise", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			KPUF B 1 Bright A_SeekerMissile(8.0, 24.0, SMF_PRECISE | SMF_CURSPEED, 256, 256)
			KPUF B 0 Bright A_SpawnItemEx("Red_Star_NoRise", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			KPUF A 0 A_JumpIfCloser(32, "Heal")
			loop
		Heal:
			KPUF A 0 A_GiveToTarget("KunaisHealthStealBonus", user_healamt)
			KPUF A 0 A_SpawnItemEx("HealingSeekerPuff", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE, 0)
			KPUF A 0 A_PlaySound("SOTNHeartbeat", CHAN_AUTO, 0.5)
			TNT1 A 2
			stop
	}
}

ACTOR Soulreaper : SH_Weapon
{
	Tag "Soul-Reaper"
	Game Doom
	Inventory.ForbiddenTo "Maximusprime"
	Weapon.SelectionOrder 8
	Weapon.slotnumber 1
	Weapon.Kickback 100
	Inventory.ForbiddenTo "Fiend"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.RestrictedTo "Kunai"
	Inventory.PickupSound "weapon/srget"
	Weapon.BobStyle "InverseSmooth"
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	+WEAPON.NOALERT
	+WEAPON.NOAUTOAIM
	+WEAPON.MELEEWEAPON
	States
	{
		Ready:
			KRDY AAABBBCCCDDD 1 A_WeaponReady
			Loop
		Deselect:
			KRDY AAABBBCCCDDD 1 A_Lower
			Loop
		Select:
			KRDY AAABBBCCCDDD 1 A_Raise
			Loop
		Fire:
			KBLD A 0 A_WeaponReady(WRF_NOFIRE) // Reset offsets
			KBLD A 2
			KBLD B 2
			KBLD C 1 A_JumpIfInventory("PowerStrength", 1, "Berserked")
			KBLD D 0 A_AlertMonsters(192)
			Goto Normal
		Normal:
			KBLD D 1 A_playsound("weapons/srswing", Chan_6)
			KBLD E 1
			KBLD F 1 A_FireBullets(-16.0, 0.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD G 1 A_FireBullets(0.0, 2.0, -1, 32, "SoulreaperPuff_SweetSpot", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD H 1 A_FireBullets(8.0, 4.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD I 1 A_FireBullets(16.0, 6.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD J 1 A_FireBullets(32.0, 8.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD K 1 A_FireBullets(40.0, 10.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD L 2 A_FireBullets(44.0, 16.0, -1, 32, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			TNT1 A 10 A_AlertMonsters(128)
			TNT1 A 0 A_ReFire
			KRDY A 1 Offset(16, 152) A_ReFire
			KRDY A 1 Offset(14, 137) A_ReFire
			KRDY B 1 Offset(12, 122) A_ReFire
			KRDY B 1 Offset(10, 107) A_ReFire
			KRDY C 1 Offset(8, 92) A_ReFire
			KRDY C 1 Offset(6, 77) A_ReFire
			KRDY D 1 Offset(4, 62) A_ReFire
			KRDY D 1 Offset(2, 47) A_ReFire
			Goto Ready
		Berserked:
			KBLD D 1 A_playsound("weapons/srswing", Chan_6)
			KBLD E 1
			KBLD F 1 A_FireBullets(-16.0, 0.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD G 1 A_FireBullets(0.0, 2.0, -1, 64, "SoulreaperPuff_SweetSpot", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD H 1 A_FireBullets(8.0, 4.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD I 1 A_FireBullets(16.0, 6.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD J 1 A_FireBullets(32.0, 8.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD K 1 A_FireBullets(40.0, 10.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			KBLD L 2 A_FireBullets(44.0, 16.0, -1, 64, "SoulreaperPuff", FBF_EXPLICITANGLE | FBF_NORANDOM | FBF_NORANDOMPUFFZ | FBF_NOFLASH, 96.0)
			TNT1 A 10 A_AlertMonsters(128)
			TNT1 A 0 A_ReFire
			KRDY A 1 Offset(16, 152) A_ReFire
			KRDY A 1 Offset(14, 137) A_ReFire
			KRDY B 1 Offset(12, 122) A_ReFire
			KRDY B 1 Offset(10, 107) A_ReFire
			KRDY C 1 Offset(8, 92) A_ReFire
			KRDY C 1 Offset(6, 77) A_ReFire
			KRDY D 1 Offset(4, 62) A_ReFire
			KRDY D 1 Offset(2, 47) A_ReFire
			Goto Ready
		AltFire:
			KRDY A 0 A_WeaponReady(WRF_NOFIRE) // Reset offsets
			KBLD A 0 A_JumpIfInventory("AbilityCharge", 25, "Bladebem")
			KRDY AAABBBCCCDDD 1 A_WeaponReady(WRF_NOSECONDARY)
			Goto Ready
		Bladebem:
			KBLD D 0 A_AlertMonsters(384)
			KBLD D 1 A_playsound("weapons/srswing", Chan_6)
			KBLD E 1
			KBLD F 1 A_takeinventory("AbilityCharge",25)
			KBLD G 1 A_FireCustomMissile("Beem_Slash",0,0,0,0,0)
			KBLD H 1
			KBLD I 1
			KBLD J 2
			KBLD L 2
			TNT1 A 10 A_AlertMonsters(192)
			KRDY A 0 A_ReFire
			KRDY A 1 Offset(16, 152) A_ReFire
			KRDY A 1 Offset(14, 137) A_ReFire
			KRDY B 1 Offset(12, 122) A_ReFire
			KRDY B 1 Offset(10, 107) A_ReFire
			KRDY C 1 Offset(8, 92) A_ReFire
			KRDY C 1 Offset(6, 77) A_ReFire
			KRDY D 1 Offset(4, 62) A_ReFire
			KRDY D 1 Offset(2, 47) A_ReFire
			Goto Ready
	}
}

ACTOR Kunaisrevolver : SH_Weapon //Weapon base from Golden souls
{
	Weapon.SelectionOrder 7
	Weapon.PreferredSkin "Pistol-Marine"
	Weapon.SlotNumber 2
	Inventory.Forbiddento "Maximusprime"
	Inventory.ForbiddenTo "Fiend"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.RestrictedTo "Kunai"
	Weapon.AmmoUse1 0
	Weapon.AmmoUse2 0
	Weapon.AmmoGive1 18
	+WEAPON.NOAUTOAIM
	+DONTGIB
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Inventory.PickupSound "misc/w_pkup"
	Weapon.AmmoType1 "Peastolclip"
	Weapon.AmmoType2 "REV_SHOT"
	decal bulletchip
	States
	{
		Ready:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"Goldready")
			NULL A 0 A_JumpIfInventory("Reload",0,"Reload")
			COLT A 1 A_WeaponReady (WRF_ALLOWRELOAD)
			Loop
		Deselect:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"Golddeselect")
			NULL A 0 A_TakeInventory("Reload",1)
			COLT A 1 A_Lower
			loop
		Select:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"GoldSelect")
			COLT A 1 A_Raise
			Loop
		Fire:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"GoldFire")
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto Dryfire
			COLT A 1 A_TakeInventory("REV_SHOT",1)
			COLT B 1 A_Playsound("REVFIRE", CHAN_WEAPON)
			TNT1 A 0 A_GUNFLASH
			COLT C 1 BRIGHT A_FireBullets(0, 0, -1, 20,"BulletPuff",1)
			TNT1 A 0
			COLT D 1
			TNT1 A 0
			COLT E 4
			COLT D 5
			COLT A 1 A_refire
			Goto Ready
		ALTFIRE:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"GoldAltFire")
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto AltfireDry
			HCLT A 4
			HCLT B 4
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNDry
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNDry
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNDry
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNDry
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNDry
			HCLT C 2 A_TakeInventory("REV_SHOT",1)
			HCLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HLCT D 0 A_gunflash
			HCLT E 2 BRIGHT A_FireBullets(3.5, 3.5, -1, 20,"BulletPuff",1)
			HCLT F 4
			HCLT G 4
			goto Reload
		GoldALTFIRE:
			GOLT A 0 A_JumpIfInventory("Highnoon",1,"HNGoldaltfire")
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto Golddry
			HGLT A 4
			HGLT B 4
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			HGLT F 4
			HGLT G 4
			goto Reload
		HNGoldaltfire:
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto Golddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto HNGolddry
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(3, 3, -1, 25,"BulletPuff",1)
			HGLT F 4
			HGLT G 4
			goto Reload
		AltfireDry:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"Golddry")
			HCLT A 4
			HCLT B 4
			HCLT C 4
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			HCLT F 4
			HCLT G 4
			COLT A 4
			Goto Reload
		GoldDry:
			HGLT A 4
			HGLT B 4
			HGLT C 4
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			HGLT F 4
			HGLT G 4
			GOLT A 4
			Goto Reload
		HNGoldDry:
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			HGLT F 4
			HGLT G 4
			GOLT A 4
			Goto Reload
		HNDry:
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			HCLT F 4
			HCLT G 4
			COLT A 4
			Goto Reload
		Reload:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"Goldreload")
			NULL A 0 A_TakeInventory("Reload",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",0,"Ready")
			NULL A 0 A_JumpIfInventory("Peastolclip",1,1)
			Goto Ready
			NULL A 0 A_PlaySound("REVOPEN",chan_5)
			COLT FGHIJ 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVEJECT",chan_5)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			COLT K 2 A_WeaponReady(WRF_NOFIRE)
			COLT LM 2 A_WeaponReady(WRF_NOFIRE)
			COLT M 10 A_WeaponReady(WRF_NOFIRE)
			COLT ML 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVINSERT",chan_5)
			COLT KJIHGF 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVCLOSE",chan_5)
			COLT A 2 A_WeaponReady(WRF_NOFIRE)
		ReloadAmmoLoop:
			NULL A 0 A_TakeInventory("Peastolclip",1)
			NULL A 0 A_GiveInventory("REV_SHOT",1)
			NULL A 0 A_JumpIfInventory("Peastolclip",1,1) // if not out of ammo, countinue reloading
			goto ReloadEnd
			NULL A 0 A_JumpIfInventory("REV_SHOT",0,"ReloadEnd") // if clip full, finish reload
			goto ReloadAmmoLoop // otherwise continue
		ReloadEnd:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"GoldReloadend")
			COLT A 1 A_WeaponReady(WRF_NOFIRE)
			COLT A 1 A_weaponready
			COLT A 0 A_Jump(25,"Highnooncheck")
			Goto Ready
		GoldReload:
			NULL A 0 A_TakeInventory("Reload",1)
			NULL A 0 A_JumpIfInventory("REV_SHOT",0,"Ready")
			NULL A 0 A_JumpIfInventory("Peastolclip",1,1)
			Goto Ready
			NULL A 0 A_PlaySound("REVOPEN",chan_5)
			GOLT FGHIJ 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVEJECT",chan_5)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			NULL A 0 A_FireCustomMissile("PistolCasingSpawner", 0, 0, 0, 0)
			GOLT K 2 A_WeaponReady(WRF_NOFIRE)
			GOLT LM 2 A_WeaponReady(WRF_NOFIRE)
			GOLT M 10 A_WeaponReady(WRF_NOFIRE)
			GOLT ML 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVINSERT",chan_5)
			GOLT KJIHGF 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySound("REVCLOSE",chan_5)
			GOLT A 2 A_WeaponReady(WRF_NOFIRE)
			Goto ReloadAmmoLoop
		GoldReloadEnd:
			GOLT A 1 A_WeaponReady(WRF_NOFIRE)
			GOLT A 1 A_weaponready
			GOLT A 0 A_Jump(25,"Highnooncheck")
			Goto Ready
		Highnooncheck:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"ItsHighnoon")
			Goto Ready
		ItsHighnoon:
			NULL A 0 A_Giveinventory("Highnoon",1)
			HGLT A 4 ACS_Namedexecutewithresult("sv_highnoon")
			HGLT B 4
			HGLT C 70
			HGLT C 4 A_WeaponReady(WRF_NOSECONDARY)
			Goto ItsHighnoon+4
		Deadeyeready:
			HGLT B 4
			HGLT C 4
			HGLT C 4 A_WeaponReady
			Goto Deadeyeready+2
	
		Flash:
			TNT1 A 2 A_Light1
			TNT1 A 0 A_Light0
			Goto LightDone
		DryFire:
			COLT A 0 A_JumpIfInventory("Tier1upgradetoken",1,"GolddryFire")
			COLT A 1 A_WeaponReady(WRF_NOFIRE)
			COLT A 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			COLT B 2 A_WeaponReady(WRF_NOFIRE)
			Goto Reload
		GoldDryFire:
			GOLT A 1 A_WeaponReady(WRF_NOFIRE)
			GOLT A 2 A_WeaponReady(WRF_NOFIRE)
			NULL A 0 A_PlaySoundEx("weapons/pistol/dry","Weapon")
			GOLT B 2 A_WeaponReady(WRF_NOFIRE)
			Goto Reload
		GoldReady:
			TNT1 A 0 A_giveinventory("Tier1upgradetoken", 1)
			GOLT A 0 A_JumpIfInventory("Highnoon",1,"Deadeyeready")
			NULL A 0 A_JumpIfInventory("Reload",0,"Reload")
			GOLT A 1 A_WeaponReady (WRF_ALLOWRELOAD)
			Loop
		GoldDeselect:
			GOLT A 0 A_JumpIfInventory("Highnoon",1,"HighnoonDeselect")
			NULL A 0 A_TakeInventory("Reload",1)
			GOLT A 1 A_Lower
			loop
		HighnoonDeselect:
			NULL A 0 A_TakeInventory("Reload",1)
			HGLT F 4
			HGLT G 4
			GOLT A 1 A_Lower
			Goto HighnoonDeselect+3
		GoldSelect:
			GOLT A 1 A_Raise
			Loop
		GoldFire:
			GOLT A 0 A_JumpIfInventory("Highnoon",1,"DeadeyeFire")
			NULL A 0 A_JumpIfInventory("REV_SHOT",1,1)
			Goto Dryfire
			GOLT A 1 A_TakeInventory("REV_SHOT",1)
			GOLT B 1 A_Playsound("REVFIRE", CHAN_WEAPON)
			TNT1 A 0 A_GUNFLASH
			GOLT C 1 BRIGHT A_FireBullets(2, 2, -1, 25,"BulletPuff",1)
			GOLT D 1
			GOLT E 4
			GOLT D 5
			GOLT A 1 A_refire
			Goto Ready
		DeadeyeFire:
			NULL A 0 A_TakeInventory("Highnoon",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGCT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT C 2 A_TakeInventory("REV_SHOT",1)
			HGLT D 2 BRIGHT A_Playsound("REVFIRE", CHAN_WEAPON)
			HGLT D 0 A_gunflash
			HGLT E 2 BRIGHT A_FireBullets(1, 1, -1, 150,"BulletPuff",1)
			HGLT F 4
			HGLT G 4
			goto Reload
		Spawn:
			PIST A -1
			Stop
	}
}


actor REV_Shot : Ammo
{
	+INVENTORY.IGNORESKILL
	inventory.maxamount 6
}

//Kunai Single Shotgun
ACTOR Helltechshotgun : SH_Weapon //Weapon from Laundry
{
	Tag "HellTech Shotgun"
	Decal BulletChip
	Inventory.RestrictedTo "Kunai"
	Inventory.Respawntics"4200"
	Inventory.PickupSound "weapon/singleget"
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Weapon.AmmoType "Shellz"
	Weapon.SelectionOrder 6
	Weapon.SlotNumber 3
	Weapon.PreferredSkin "Shotgun-Marine"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive 0 // Handled in ACS
	+WEAPON.NOAUTOAIM
	States
	{
	Ready:
		SNGL A 0 A_Jumpifinventory("tier2upgradetoken",1,"GoldReady")
		SNGL A 0 A_WeaponReady
		SNGL A 1 A_WeaponReady
		Loop
	Deselect:
		SNGL A 0 A_Jumpifinventory("tier2upgradetoken",1,"GoldDeselect")
		SNGL A 0 A_Lower
		SNGL A 1 A_Lower
		Loop
	Select:
		SNGL A 0 A_Jumpifinventory("tier2upgradetoken",1,"GoldSelect")
		SNGL A 1 A_Raise
		Loop
	Fire:
		SNGL A 0 A_Jumpifinventory("tier2upgradetoken",1,"GoldFire")
		SNGL A 1 A_Playsound("Kunaishotgun_FIRE",Chan_weapon)
		SNGL A 0 A_GUNFLASH
		SNGL B 1 BRIGHT A_FireBullets (3, 3, 10, 5, "BulletPuff")
		SNGL C 1 BRIGHT
		SNGL D 1 BRIGHT
		SNGL E 1
		SNGL F 1
		SNGL G 2
		SNGL H 3
		SNGL A 4
		SNGL I 3
		SNGL J 3
		SNGL K 5 A_playsound("Kunaishotgun_Pump",Chan_6)
		SNGL L 7
		SNGL K 5
		SNGL IH 3
		SNGL A 0 A_ReFire
		Goto Ready
	Altfire:
		SNGL A 0 A_Jumpifinventory("tier2upgradetoken",1,"Goldaltfire")
		SNGL A 0 A_Print("Missing Hellshot attachment!")
		Goto ready
	Goldaltfire:
		KSGG A 0 A_Print("Function not yet complete!")
		Goto Goldfire
	GoldReady:
		KSGG A 1 A_WeaponReady
		Loop
	GoldDeselect:
		KSGG A 0 A_Lower
		KSGG A 1 A_Lower
		Loop
	GoldSelect:
		KSGG A 0 A_Raise
		KSGG A 1 A_Raise
		Loop
	GoldFire:
		KSGG A 1 A_Playsound("Kunaishotgun_FIRE",Chan_weapon)
		KSGG A 0 A_GUNFLASH
		KSGG A 0 A_Jump(64, "GoldCritFire")
		KSGG A 0 A_FireBullets (3, 3, 10, 6, "BulletPuff")
		goto GoldFireDone
	GoldCritFire:
		KSGG A 0 A_PlaySound("GenericCrit", CHAN_AUTO)
		KSGG A 0 A_FireBullets (3, 3, 10, 10, "KunaisLifeStealingPuff")
		goto GoldFireDone
	GoldFireDone:
		KSGG B 1 BRIGHT
		KSGG C 1 BRIGHT
		KSGG D 1 BRIGHT
		KSGG E 1
		KSGG F 1
		KSGG G 2
		KSGG H 3
		KSGG A 4
		KSGG I 3
		KSGG J 3
		KSGG K 5 A_playsound("Kunaishotgun_Pump",Chan_6)
		KSGG L 7
		KSGG K 5
		KSGG IH 3
		KSGG A 0 A_ReFire
		Goto Ready
	Flash:
		TNT1 A 1 Bright A_Light1
		TNT1 A 1 Bright A_Light2
		TNT1 A 1 Bright A_Light1
		Goto LightDone
	Spawn:
		SHOT A -1
		Stop
	}
}

ACTOR CryoBow : SH_Weapon
{
	Tag "Cryobow"
	Weapon.PreferredSkin "ROCKET-Marine"
	Weapon.AmmoType "RoketAmmo"
	Weapon.SelectionOrder 2
	Weapon.AmmoUse 1
	Weapon.AmmoGive 0 // Handled in ACS
	Weapon.SlotNumber 5
	Inventory.Forbiddento "Maximusprime"
	Inventory.ForbiddenTo "Fiend"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.RestrictedTo "Kunai"
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Inventory.Respawntics"4200"
	Weapon.BobStyle "InverseSmooth"
	+WEAPON.NOAUTOAIM
	Inventory.PickupSound "weapon/bowget"
	Inventory.PickupMessage "You got the Cryobow"
	Obituary "%K was shattered by %o's Cryoshot"
	States
	{
	Spawn:
		WBOW A -1
		Stop
	Deselect:
		TNT1 A 0 A_Jumpifinventory("Tier5upgradetoken",1,"GoldDeselect")
		BOWG A 1 Bright A_Lower
		Loop
	Select:
		TNT1 A 0 A_Jumpifinventory("Tier5upgradetoken",1,"Goldselect")
		BOWG A 1 Bright A_Raise
		Loop
	Ready:
		TNT1 A 0 A_Jumpifinventory("Tier5upgradetoken",1,"GoldReady")
		BOWG AAABBBCCCDDDBBB 1 Bright A_WeaponReady
		Loop
	GoldDeselect:
		GOWG A 1 Bright A_Lower
		Loop
	GoldSelect:
		TNT1 A 0 A_giveinventory("Tier5upgradetoken", 1)
		GOWG A 1 Bright A_Raise
		Loop
	GoldReady:
		GOWG AAABBBCCCDDDBBB 1 Bright A_WeaponReady
		Loop
	Altfire:
		BOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		BOWG A 0 A_Jumpifinventory("Tier5upgradetoken",1, "GOLDALTFIRE")
		BOWG A 0 A_JumpifInventory("GosimersAmmoSphere",1,"InfammoBluecharge")
		BOWG A 0 Bright
		BOWG A 0 Bright A_PlaySound("Weapon/Cryobow/Charge",chan_6)
		BOWG A 0 Bright
		BOWG A 0 Bright A_PlaySound("Weapon/Cryobow/Charge",chan_6)
		BOWG AAABBBCCCDDDBBB 2
		BOWF J 6 Bright
		BOWF K 5 Bright
	Althold:
		BOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		BOWG A 0 A_Jumpifinventory("Tier5upgradetoken",1, "GoldAlthold")
		BOWF L 2 Bright
		BOWF M 2 Bright
		BOWF N 2 Bright
		BOWF O 2 Bright A_PlaySound("Weapon/Cryobow/Charged",chan_6)
		BOWF L 0 Bright A_refire
	BlueChargedFire:
		BOWF K 1 Bright A_takeinventory("Roketammo",5)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		BOWF A 0 Bright A_FireCustomMissile("SlowCryoShot",0,1)
		TNT1 A 0 Bright A_FireCustomMissile("SlowCryoShot",0,1)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold1",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold2",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold3",0,1,0,8,0)
		BOWF CD 2 Bright
		BOWF E 8
		BOWF E 2 A_PlaySound("weapons/cryobowreload",chan_6)
		BOWF E 2 Offset(0,31)
		BOWF F 2 Offset(0,32)
		BOWF F 2 Offset(0,30)
		BOWF G 2 Offset(0,31)
		BOWF HI 1 Offset(0,32)
		BOWG CDB 3 Bright Offset(0,32)
		Goto Ready
	InfammoBluecharge:
		BOWG A 0 Bright
		BOWG A 0 Bright A_PlaySound("Weapon/Cryobow/Charge",chan_6)
		BOWG AAABBBCCCDDDBBB 2
		BOWF J 6 Bright
		BOWF K 5 Bright
	INFAlthold:
		BOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		BOWG A 0 A_Jumpifinventory("Tier5upgradetoken",1, "GoldAlthold")
		BOWF L 2 Bright
		BOWF M 2 Bright
		BOWF N 2 Bright
		BOWF O 2 Bright A_PlaySound("Weapon/Cryobow/Charged",chan_6)
		BOWF L 0 Bright A_refire
	INFBlueChargedFire:
		BOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		BOWF A 0 Bright A_FireCustomMissile("SlowCryoShot",0,1)
		TNT1 A 0 Bright A_FireCustomMissile("SlowCryoShot",0,1)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold1",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold2",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotGold3",0,1,0,8,0)
		BOWF CD 2 Bright
		BOWF E 8
		BOWF E 2 A_PlaySound("weapons/cryobowreload",chan_6)
		BOWF E 2 Offset(0,31)
		BOWF F 2 Offset(0,32)
		BOWF F 2 Offset(0,30)
		BOWF G 2 Offset(0,31)
		BOWF HI 1 Offset(0,32)
		BOWG CDB 3 Bright Offset(0,32)
		Goto Ready
	Fire:
		BOWG A 0 A_Jumpifinventory("Tier5upgradetoken",1, "GOLDFIRE")
		BOWG A 0 Bright A_GunFlash
		BOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		BOWF A 2 Bright A_FireCustomMissile("CryoShot",0,1)
		BOWF BCD 2 Bright
		BOWF E 8
		BOWF E 2 A_PlaySound("weapons/cryobowreload",chan_6)
		BOWF E 2 Offset(0,31)
		BOWF F 2 Offset(0,32)
		BOWF F 2 Offset(0,30)
		BOWF G 2 Offset(0,31)
		BOWF HI 1 Offset(0,32)
		BOWG CDB 3 Bright Offset(0,32)
		BOWG A 0 A_ReFire
		Goto Ready
	GoldFire:
		NULL A 0 A_Jump(75,"GoldFire2")
		GOWG A 0 Bright A_GunFlash
		GOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		GOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		GOWF A 2 Bright A_FireCustomMissile("GoldCryoShot",0,1)
		GOWF BCD 2 Bright
		GOWF E 8
		GOWF E 2 A_PlaySound("weapons/cryobowreload")
		GOWF E 2 Offset(0,31)
		GOWF F 2 Offset(0,32)
		GOWF F 2 Offset(0,30)
		GOWF G 2 Offset(0,31)
		GOWF HI 1 Offset(0,32)
		GOWG CDB 3 Bright Offset(0,32)
		GOWG A 0 A_ReFire
		Goto Ready
	GoldFire2:
		GOWG A 0 Bright A_GunFlash
		GOWG A 0 A_Giveinventory("Roketammo",1)
		GOWG A 0 Bright A_PlaySound("weapons/cryobowshot")
		GOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		GOWF A 2 Bright A_FireCustomMissile("GoldCryoShot",0,1)
		GOWF BCD 2 Bright
		GOWF E 8
		GOWF E 2 A_PlaySound("weapons/cryobowreload")
		GOWF E 2 Offset(0,31)
		GOWF F 2 Offset(0,32)
		GOWF F 2 Offset(0,30)
		GOWF G 2 Offset(0,31)
		GOWF HI 1 Offset(0,32)
		GOWG CDB 3 Bright Offset(0,32)
		GOWG A 0 A_ReFire
		Goto Ready
	GoldAltfire:
		GOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		GOWG A 0 A_JumpifInventory("GosimersAmmoSphere",1,"InfammoBluecharge")
		GOWG A 0 Bright
		GOWG A 0 Bright A_PlaySound("Weapon/Cryobow/Charge",chan_6)
		GOWG A 0 Bright
		GOWG A 0 Bright A_PlaySound("Weapon/Cryobow/Charge",chan_6)
		GOWG AAABBBCCCDDDBBB 2
		GOWF J 6 Bright
		GOWF K 5 Bright
	GOLDAlthold:
		GOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		GOWF L 2 Bright
		GOWF M 2 Bright
		GOWF N 2 Bright
		GOWF O 2 Bright A_PlaySound("Weapon/Cryobow/Charged",chan_6)
		GOWF L 0 Bright A_refire
	GoldChargedFire:
		BOWG A 0 A_Jumpifinventory("Roketammo",5,1)
		Goto Ready
		GOWF A 1 Bright A_takeinventory("Roketammo",5,1)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		GOWF A 0 Bright A_FireCustomMissile("SlowGoldCryoShot",0,1)
		TNT1 A 0 Bright A_FireCustomMissile("SlowGoldCryoShot",0,1)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue1",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue2",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue3",0,1,0,8,0)
		GOWF BCD 2 Bright
		GOWF E 8
		GOWF E 2 A_PlaySound("weapons/cryobowreload",chan_6)
		GOWF E 2 Offset(0,31)
		GOWF F 2 Offset(0,32)
		GOWF F 2 Offset(0,30)
		GOWF G 2 Offset(0,31)
		GOWF HI 1 Offset(0,32)
		GOWG CDB 3 Bright Offset(0,32)
		Goto Ready
	InfammoChargegold:
		GOWG A 0 Bright
		GOWG A 0 Bright A_PlaySound("weapon/Cryobow/Charge",chan_6)
		GOWG A 7 Bright
		GOWC A 7 Bright
		GOWC B 6 Bright
		GOWC C 5 Bright
	INFGoldAlthold:
		GOWF L 2 Bright
		GOWF M 2 Bright
		GOWF N 2 Bright
		GOWF O 2 Bright A_PlaySound("Weapon/Cryobow/Charged",chan_6)
		GOWF L 0 Bright A_refire
	INFGoldChargedFire:
		BOWG A 0 Bright A_PlaySound("weapons/cryobowshot",chan_6)
		BOWG A 0 Bright A_PlaySound("weapons/cryobowfire", CHAN_WEAPON)
		GOWF A 0 Bright A_FireCustomMissile("SlowGoldCryoShot",0,1)
		TNT1 A 0 Bright A_FireCustomMissile("SlowGoldCryoShot",0,1)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue1",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue2",0,1,0,8,0)
		TNT1 A 0 A_FireCustomMissile("ChargeCryoShotBlue3",0,1,0,8,0)
		GOWF BCD 2 Bright
		GOWF E 8
		GOWF E 2 A_PlaySound("weapons/cryobowreload",chan_6)
		GOWF E 2 Offset(0,31)
		GOWF F 2 Offset(0,32)
		GOWF F 2 Offset(0,30)
		GOWF G 2 Offset(0,31)
		GOWF HI 1 Offset(0,32)
		GOWG CDB 3 Bright Offset(0,32)
		Goto Ready
	Flash:
		TNT1 A 2 Bright A_Light1
		TNT1 A 2 Bright A_Light2
		TNT1 A 1 Bright A_Light1
		TNT1 A 0 A_Light0
		Goto LightDone
	}
}


ACTOR Streetsweeper : SH_Weapon 8467
{
	Tag "Street Sweeper"
	Weapon.PreferredSkin "SSG-Marine"
	Game Doom
	SpawnID 28
	Weapon.SelectionOrder 1
	Weapon.AmmoUse 1
	Weapon.AmmoGive 0 // Handled in ACS
	Weapon.AmmoType "SuperShellz"
	Weapon.SlotNumber 3
	Weapon.slotpriority 2
	Inventory.Forbiddento "Maximusprime"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.ForbiddenTo "Fiend"
	Inventory.RestrictedTo "Kunai"
	Inventory.Respawntics"4200"
	+WEAPON.NOAUTOAIM
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Inventory.PickupSound "weapon/streetsweeperget"
	Inventory.PickupMessage "You got the street sweaper! time to rock"
	Obituary "%o was decimated by %k's Street sweeper"
	States
	{
	Ready:
		STSW A 0 A_Jumpifinventory("Tier3upgradetoken", 1 ,"GoldReady")
		STSW A 1 A_WeaponReady
		Loop
	GoldReady:
		STSG A 1 A_WeaponReady
		Loop
	Deselect:
		STSW A 0 A_Jumpifinventory("Tier3upgradetoken", 1 ,"GoldDeselect")
		STSW A 1 A_Lower
		Loop
	GoldDeselect:
		STSG A 1 A_Lower
		Loop
	Select:
		STSW A 0 A_Jumpifinventory("Tier3upgradetoken", 1 ,"GoldSelect")
		STSW A 1 A_Raise
		Loop
	GoldSelect:
		TNT1 A 0 A_giveinventory("Tier3upgradetoken", 1)
		STSG A 1 A_Raise
		Loop
	Fire:
		STSW A 0 A_Jumpifinventory("Tier3upgradetoken", 1 ,"GoldFire")
		STSW A 0 A_PlaySound("SSWFire", CHAN_WEAPON)
		STSW B 0 A_Recoil(1)
		STSW B 2 BRIGHT A_FireBullets(5, 5, 10, 4, "BulletPuff")
		STSW C 2 BRIGHT
		STSW D 2 A_FireCustomMissile("SingleShotgunCasingSpawner", 0, 0, 0, 1)
		STSW EF 2
		STSW A 3
		STSW A 0 A_ReFire
		Goto Ready
	GoldFire:
		STSG A 0 A_Jump(40, "GoldFire_Crit")
		STSG A 0 A_PlaySound("SSWFire", CHAN_WEAPON)
		STSG B 0 A_Recoil(2)
		STSG B 0 A_FireBullets(4, 4, 10, 5, "BulletPuff")
		goto GoldFire_End
	GoldFire_Crit:
		STSG A 0 A_PlaySound("SSWFire", CHAN_WEAPON)
		STSG A 0 A_PlaySound("GenericCrit", CHAN_AUTO)
		STSG B 0 A_Recoil(5)
		STSG B 0 A_FireBullets(4, 4, 10, 10, "KunaisLifeStealingPuff")
		goto GoldFire_End
	GoldFire_End:
		STSG B 2 BRIGHT
		STSG C 2 BRIGHT
		STSG D 2 A_FireCustomMissile("SingleShotgunCasingSpawner", 0, 0, 0, 1)
		STSG EF 2
		STSG A 2
		STSG A 0 A_ReFire("GoldFire")
		Goto GoldReady
	Spawn:
		STSP A -1
		Stop
	}
}

Actor PDW : SH_Weapon
{
	Tag "PDW"
	Weapon.PreferredSkin "Carbine-Marine"
	Game Doom
	scale 1
	SpawnID 28
	Weapon.SelectionOrder 3
	Weapon.SlotNumber 4
	Inventory.Forbiddento "Maximusprime"
	Inventory.ForbiddenTo "Fiend"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.RestrictedTo "Kunai"
	Weapon.AmmoUse 1
	Weapon.AmmoGive 0 // Handled in ACS
	Weapon.AmmoType "AK_MAG"
	Inventory.Respawntics"4200"
	+WEAPON.NOAUTOAIM
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Inventory.PickupSound"LMGGET"
	Inventory.PickupMessage "You got the PDW!"
	Obituary "%o Had a bad time by %k's PDW"
	States
	{
		Ready:
			KPDW A 0 A_Jumpifinventory("Tier4upgradetoken", 1, "Goldready")
			KPDW A 1 A_WeaponReady
			Loop
		Deselect:
			KPDW A 0 A_Jumpifinventory("Tier4upgradetoken", 1, "GoldDeselect")
			KPDW A 1 A_Lower
			loop
		Select:
			KPDW A 0 A_Jumpifinventory("Tier4upgradetoken", 1, "Goldselect")
			KPDW A 1 A_Raise
			Loop
		Fire:
			KPDW A 0 A_Jumpifinventory("Tier4upgradetoken", 1, "Goldfire")
			NULL A 0 A_FireCustomMissile("ChaingunCasingSpawner", 0, 0, 0, 1)
			KPDW A 0 A_PlaySound("PDWFire", CHAN_WEAPON)
			KPDW B 1 Bright A_GunFlash("Shoot")
			KPDW C 1 Bright
			KPDW A 2
			KPDW A 0 A_Refire
			goto Ready
		Shoot:
			TNT1 A 0 A_FireBullets(4, 1, 1, random(6,7), "Bulletpuff")
			goto Flash
		Hold:
			KPDW A 0 A_Jump(256, "RandomPos1", "RandomPos2", "RandomPos3", "RandomPos4", "RandomPos5", "RandomPos6", "RandomPos7")
			goto Fire
		RandomPos1:
			KPDW A 0 Offset(0, 33)
			goto Fire
		RandomPos2:
			KPDW A 0 Offset(-2, 32)
			goto Fire
		RandomPos3:
			KPDW A 0 Offset(2, 34)
			goto Fire
		RandomPos4:
			KPDW A 0 Offset(1, 31)
			goto Fire
		RandomPos5:
			KPDW A 0 Offset(-1, 35)
			goto Fire
		RandomPos6:
			KPDW A 0 Offset(-3, 32)
			goto Fire
		RandomPos7:
			KPDW A 0 Offset(3, 33)
			goto Fire

		//Gold state

		GoldReady:
			KPDG A 1 A_WeaponReady
			Loop
		GoldDeselect:
			KPDG A 1 A_Lower
			loop
		GoldSelect:
			TNT1 A 0 A_giveinventory("Tier4upgradetoken", 1)
			KPDG A 1 A_Raise
			Loop
		GoldFire:
			KPDG B 0 BRIGHT A_PlaySound("PDWFire", CHAN_WEAPON)
			KPDG B 2 BRIGHT A_GunFlash("GoldShoot")
			KPDG C 0 BRIGHT A_PlaySound("PDWFire", CHAN_6)
			KPDG C 2 BRIGHT A_GunFlash("GoldShoot")
			KPDG A 0 A_ReFire
			Goto Ready
		GoldShoot:
			TNT1 A 0 A_Jump(16, "GoldCrit")
			TNT1 A 0 A_FireBullets(5, 5, -1, random(6,7), "Bulletpuff")
			goto Flash
		GoldCrit:
			TNT1 A 0 A_PlaySound("GenericCrit", CHAN_AUTO)
			TNT1 A 0 A_FireBullets(5, 5, -1, 10, "KunaisLifeStealingPuff")
			goto Flash
		Flash:
			TNT1 A 1 A_Light1
			TNT1 A 1 A_Light0
			Goto Lightdone
		Spawn:
			AK4I A -1
			Stop
	}
}

Actor KunaisKar98 : SH_Weapon
{
	Tag "Kar-98"
	Obituary "%o Got picked off by %k's Kar98"
	Scale 1.0
	Weapon.PreferredSkin "Carbine-Marine"
	Weapon.AmmoUse1 1
	Weapon.AmmoGive1 5
	Weapon.AmmoType1 "Railslugs"
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Weapon.SelectionOrder 3
	Weapon.SlotNumber 7
	Weapon.Slotpriority 1
	Inventory.Forbiddento "Maximusprime"
	Inventory.ForbiddenTo "Gosimer"
	Inventory.ForbiddenTo "Fiend"
	Inventory.RestrictedTo "Kunai"
	Inventory.Respawntics"4200"
	Inventory.PickupSound"weapon/RAILGET"
	Inventory.PickupMessage "You got the kar98!"
	+WEAPON.NOAUTOAIM
	States
	{
		Select:
			KARG A 1 A_Raise
			Loop
		Deselect:
			KARG A 1 A_Lower
			Loop
		Ready:
			KARG A 1 A_WeaponReady
			loop
		Fire:
			KARG A 2 A_GunFlash
			KARG A 0 A_PlaySoundEx("weapon/K98FIRE","Weapon")
			KARF A 1 Bright A_FireBullets(0.5, 0.5, 1, 100)
			KARF B 1 Bright
			KARG A 1
			KARG B 2
			KARG C 3 A_PlaySoundEx("weapon/K98Boltback","SoundSlot5")
			KARG D 4
			KARG E 3
			KARG F 3
			KARG G 2 A_FireCustomMissile("ChaingunCasingSpawner", 0, 0, 0, 1)
			KARG H 5
			KARG I 2 A_PlaySoundEx("weapon/K98Boltforward","SoundSlot6")
			KARG J 3
			KARG K 4
			KARG L 3
			KARG A 2
			KARG A 1 A_Refire
			Goto Ready
		Flash:
			TNT1 A 1 A_LIGHT1
			TNT1 A 1 A_LIGHT2
			TNT1 A 0 A_Light0
			Stop
		Spawn:
			 K98G A -1
			 Stop
	}
}

Actor Vortexgun : SH_Weapon
{
	Tag "Black Hole Generator"
	Obituary "%o got disintegrated by %k's Black Hole Generator."
	Weapon.PreferredSkin "BFG10k-Marine"
	Weapon.SelectionOrder 2900
	Weapon.AmmoUse 2
	Weapon.AmmoGive 0 // Handled in ACS
	Weapon.AmmoType "bfgcharge"
	Weapon.slotnumber 8
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.BobStyle "InverseSmooth"
	Inventory.Restrictedto "Kunai"
	Inventory.PickupSound "weapon/vortexget"
	Inventory.PickupMessage "You got the Black Hole Generator!"
	+WEAPON.NOAUTOAIM
	States
	{
		Spawn:
			DCAN A -1
			Stop
		Select:
			DMAT A 0 A_JumpIfInventory("tier7upgradetoken", 1, "Goldselect")
			DMAT A 1 A_Raise
			Loop
		Deselect:
			DMAT A 0 A_JumpIfInventory("tier7upgradetoken", 1, "Golddeselect")
			DMAT A 1 A_Lower
			Loop
		Ready:
			DMAT A 0 A_JumpIfInventory("tier7upgradetoken", 1, "Goldready")
			DMAT A 1 A_WeaponReady
			Loop
		Fire:
			DMAT A 0 A_JumpIfInventory("Tier7upgradetoken",1,"Goldfire")
			DMAT A 30 A_PlayWeaponSound("DMC/Charge")
			DMAT A 10 Bright
			TNT1 A 0 A_PlayWeaponSound("DMC/Fire")
			TNT1 A 0 A_GunFlash
			DMAT B 4 Bright A_FireCustomMissile("DMBall", 0, true, 0, 0)
			DMAT CD 4 Bright
			DMAT A 10
			Goto Ready
		
		// GOLD VERSION
		GoldSelect:
			TNT1 A 0 A_giveinventory("Tier7upgradetoken", 1)
			DMAG A 1 A_Raise
			Loop
		GoldDeselect:
			DMAG A 1 A_Lower
			Loop
		GoldReady:
			DMAG A 1 A_WeaponReady
			Loop
		GoldFire:
			DMAG A 30 A_PlayWeaponSound("DMC/Charge")
			DMAG A 10 Bright
			TNT1 A 0 A_PlayWeaponSound("DMC/Fire")
			TNT1 A 0 A_GunFlash
			DMAG A 0 A_takeinventory("bfgcharge",1)
			DMAG B 4 Bright A_FireCustomMissile("DMBall", 0, true, 0, 0)
			DMAG CD 4 Bright
			DMAG A 10
			Goto Ready
		Flash:
			TNT1 A 4 A_Light2
			TNT1 A 3 A_Light1
			TNT1 A 0 A_Light0
			Stop
	}
}

actor Channeler : SH_Weapon
{
	Tag "Channeler"
	Obituary "%o was burned by %k's volatile plasma."
	Weapon.PreferredSkin "Plasma-Rifle-Marine"
	Weapon.SelectionOrder 5
	Weapon.AmmoUse1 1
	Weapon.AmmoUse2 1
	Weapon.AmmoType1 "Battery"
	Weapon.AmmoType2 "Battery"
	Weapon.AmmoGive 0 // Handled in ACS
	Weapon.UpSound "Channeler/Up"
	Weapon.BobSpeed 1.5
	Weapon.BobRangeX .5
	Weapon.slotnumber 7
	Weapon.Slotpriority 2
	Weapon.BobStyle "InverseSmooth"
	Inventory.RestrictedTo "Kunai"
	inventory.pickupsound "weapon/channlerget"
	inventory.pickupmessage "You got the Channeler!"
	radius 20
	height 16
	+WEAPON.NOAUTOAIM
	states
	{
		Ready:
			AMCC A 0 A_Jumpifinventory("Tier6upgradetoken",1, "Goldready")
			AMCC BCDEFG 2 BRIGHT A_WeaponReady(WRF_NOSECONDARY)
			AMCC A 0 A_StopSound(CHAN_7)
			loop
		Deselect: 
			AMCC A 0 A_Jumpifinventory("Tier6upgradetoken",1, "Golddeselect")
			AMCC B 2 BRIGHT A_Lower
			AMCC B 0 A_StopSound(CHAN_7)
			loop
		Select:
			AMCC A 0 A_Jumpifinventory("Tier6upgradetoken",1, "Goldselect")
			AMCC B 2 BRIGHT A_Raise
			AMCC B 0 A_StopSound(CHAN_7)
			loop
		
		Fire:
			AMCC A 0 A_Jumpifinventory("Tier6upgradetoken",1, "GoldFire")
			AMCC A 0 A_GunFlash
			AMCC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMCC G 1 BRIGHT
			AMCC H 1 BRIGHT A_FireCustomMissile("ChannelerSeducer", 0, 1, 0, 0)
			AMCC I 1 BRIGHT
			AMCC A 0 A_GunFlash
			AMCC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMCC G 1 BRIGHT
			AMCC H 1 BRIGHT A_FireCustomMissile("ChannelerSeducer", 0, 1, 0, 0)
			AMCC I 1 BRIGHT
			AMCC A 0 A_GunFlash
			AMCC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMCC G 1 BRIGHT
			AMCC H 1 BRIGHT A_FireCustomMissile("ChannelerSeducer", 0, 1, 0, 0)
			AMCC I 1 BRIGHT
			AMCC JKL 2 BRIGHT
			AMCC B 0 Bright A_ReFire
			goto Ready
		GOLDReady:
			AMGC BCDEFG 2 BRIGHT A_WeaponReady
			AMGC A 0 A_StopSound(CHAN_7)
			loop
		GOLDDeselect: 
			AMGC B 2 BRIGHT A_Lower
			AMGC B 0 A_Lower
			AMGC B 0 A_StopSound(CHAN_7)
			loop
		GOLDSelect:
			TNT1 A 0 A_giveinventory("Tier6upgradetoken", 1)
			AMGC B 2 BRIGHT A_Raise
			AMGC B 0 A_Raise
			AMGC B 0 A_StopSound(CHAN_7)
			loop
		GoldFire:
			AMGC H 0 A_PlaySound("Channeler/Fire", CHAN_7, 1.0, true)
			AMGC H 0 A_GunFlash
			AMGC H 1 BRIGHT A_FireCustomMissile("REDChannelerBeam", 0, true, 0, 0)
			AMGC I 1 BRIGHT
			AMGC J 1 BRIGHT A_FireCustomMissile("REDChannelerBeam", 0, 0, 0, 0)
			AMGC K 1 BRIGHT
			AMGC L 1 BRIGHT A_FireCustomMissile("REDChannelerBeam", 0, 0, 0, 0)
			AMGC G 0 A_Refire
			AMGC G 0 A_StopSound(CHAN_7)
			goto Ready
		AltFire: // Gold only
			AMGC A 0 A_GunFlash
			AMGC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMGC G 1 BRIGHT
			AMGC H 1 BRIGHT A_FireCustomMissile("REDChannelerSeducer", 0, 1, 0, 0)
			AMGC I 1 BRIGHT
			AMGC A 0 A_GunFlash
			AMGC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMGC G 1 BRIGHT
			AMGC H 1 BRIGHT A_FireCustomMissile("REDChannelerSeducer", 0, 1, 0, 0)
			AMGC I 1 BRIGHT
			AMGC A 0 A_GunFlash
			AMGC A 0 A_PlaySound("Channeler/AltFire", CHAN_7)
			AMGC G 1 BRIGHT
			AMGC H 1 BRIGHT A_FireCustomMissile("REDChannelerSeducer", 0, 1, 0, 0)
			AMGC I 1 BRIGHT
			AMGC JKL 2 BRIGHT
			AMGC B 0 Bright A_ReFire
			goto Ready
		Flash:
			TNT1 A 1 bright A_Light1
			TNT1 A 1 bright A_Light2
			TNT1 A 0 bright A_Light0
			stop
		Spawn:
			AMCC A -1
			Stop
	}
}